<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>个人中心</title>
		<script type="text/javascript" src="js/vue.min.js"></script>
		<script type="text/javascript" src="js/element-ui.js"></script>
		<link rel="stylesheet" type="text/css" href="css/element-ui.css" />
		<link rel="stylesheet" type="text/css" href="css/center.css" />
		<script type="text/javascript" src="js/echarts.js"></script>
		<script type="text/javascript" src="js/axios.min.js"></script>
	</head>
	<body>
		<span id="center_user">
			<div id="xinxi" style=" background-image: url(img/xinxi1.jpg); moz-background-size:100% 100%; background-size:100% 100%;">
				<div id="touxiang">
					<a title="编辑图片" href="user_update.html">
						<img alt="编辑图片" id="timg" :src="imgurl+'/'+imgname" />
					</a>
					<script type="text/javascript">
						var app = new Vue({
							el: '#touxiang',
							data() {
								return {
									urlPre: "http://localhost:8030/user",
									imgurl: "",
									imgname: "",
								};
							},
							created: function() {
								var vm = this;
								axios.get(`${vm.urlPre}/userinfo?uid=2`)
									.then(function(response) {
										vm.imgurl = response.data.ui_headportrait;
										vm.imgname = response.data.ui_headportraitname;
										console.log(response);
										//alert(response.data.ui_nickname)
										console.log(response.data);
									})
									.catch(function(error) {
										console.log(error);
									});
							}
						});
					</script>
				</div>
				<div id="guanzhu">
					<span v-if=ismyself>

					</span>
					<span v-else-if="isorno==0">
						<el-button type="primary" size="small " @click="gz" icon="el-icon-circle-plus-outline">{{fans}}</el-button>
					</span>
					<span v-else>
						<el-button type="info" size="small " @click="qgz">{{nofans}}</el-button>
					</span>
					<script type="text/javascript">
						var app = new Vue({
							el: '#guanzhu',
							data() {
								return {
									urlPre: "http://localhost:8030/user",
									fans: "关注",
									nofans: "已关注",
									ismyself: false,
									isorno: 0,
								}
							},
							mounted: function() {
								var vm = this;
								axios.get(`${vm.urlPre}/getIsMyfocus?uid=1&fid=8`)
									.then(function(response) {
										vm.isorno = response.data;
										//alert(response.data)
										console.log(response);
										//alert(response.data.ui_nickname)
										console.log(response.data);
									})
									.catch(function(error) {
										console.log(error);
									});
							},
							methods: {
								gz: function() {
									var vm = this;
									axios.post(`${vm.urlPre}/postMyfocus?uid=1&fid=8`)
										.then(function(response) {
											vm.isorno = 1;
											console.log(response);
											console.log(response.data);
										})
										.catch(function(error) {
											console.log(error);
										});
								},
								qgz: function() {
									var vm = this;
									axios.delete(`${vm.urlPre}/deleteMyfocus?uid=1&fid=8`)
										.then(function(response) {
											vm.isorno = 0;
											console.log(response);
											console.log(response.data);
										})
										.catch(function(error) {
											console.log(error);
										});
								}
							}
						});
					</script>
				</div>
				<div id="nickname">
					{{msg}}
					<script type="text/javascript">
						var app = new Vue({
							el: '#nickname',
							data() {
								return {
									urlPre: "http://localhost:8030/user",
									msg: "",
								};
							},
							created: function() {
								var vm = this;
								axios.get(`${vm.urlPre}/userinfo?uid=2`)
									.then(function(response) {
										vm.msg = response.data.ui_nickname;
										console.log(response);
										//alert(response.data.ui_nickname)
										console.log(response.data);
									})
									.catch(function(error) {
										console.log(error);
									});
							}
						});
					</script>
				</div>
				<div id="zhiye">
					{{zhiye}}&nbsp;|&nbsp;{{zhiyexiangqing}}
					<script type="text/javascript">
						var app = new Vue({
							el: '#zhiye',
							data() {
								return {
									zhiye: "学生",
									zhiyexiangqing: "河南工业-其他"
								};
							}
						});
					</script>
				</div>
				<!-- <div id="fans">
					<a href="#" style="color: #8CC5FF;"><span id="myfans">关注{{mfans}}人</span></a>&nbsp;|
					<a href="#" style="color: #8CC5FF;"><span id="myfous">粉丝{{mfous}}人</span></a>
					<script type="text/javascript">
						var app = new Vue({
							el: '#fans',
							data() {
								return {
									urlPre: "http://localhost:8030/user",
									mfans: 0,
									mfous: 0,
								};
							},
							created: function() {
								var vm = this;
								axios.get(`${vm.urlPre}/getMyFansCount?uid=1`)
									.then(function(response) {
										vm.mfous = response.data;
										console.log(response);
										console.log(response.data);
									})
									.catch(function(error) {
										console.log(error);
									});
							},
							mounted: function() {
								var vm = this;
								axios.get(`${vm.urlPre}/getMyfocusCount?uid=1`)
									.then(function(response) {
										vm.mfans = response.data;
										console.log(response);
										console.log(response.data);
									})
									.catch(function(error) {
										console.log(error);
									});
							}
						});
					</script>
				</div> -->
				<div id="fansorfous">
					<el-button type="text" @click="fanstab">粉丝{{mfans}}人</el-button>
					<el-button type="text" @click="foustab">粉丝{{mfous}}人</el-button>
					<el-dialog width="820px" :visible.sync="op" style="margin-top: -50px;">
						<el-tabs style="margin-top: -50px;" v-model="activeName" id="fansdig" @tab-click="handleClick">
							<el-tab-pane class="fansfans" :label="ss" name="myfans">
								<div class="daxiao">
									<div class="xh" v-for="l in fanslist">
										<a href="user_update.html">
											<img class="ftimg" :src="l.ui_headportrait+'/'+l.ui_headportraitname" />
										</a>
										<div class="fname" v-text="l.ui_nickname"></div>
										<span class="fxinxi">{{shenfen}}&nbsp;|</span>
										<span class="fxinxi">{{xuexiao}}</span>
										<span id="ffans" class="fxinxi">粉丝{{fensi}}人
											<script type="text/javascript">
												var app = new Vue({
													el: '#ffans',
													data() {
														return {
															fensi: 0,
															urlPre: "http://localhost:8030/user",
														};
													},
													created: function() {
														var vm = this;
														axios.get(`${vm.urlPre}/getMyFansCount?uid=l.u_uid`)
															.then(function(response) {
																vm.fensi = response.data;
																console.log(response);
																alert(response.data)
																console.log(response.data);
															})
															.catch(function(error) {
																console.log(error);
															});
													}
												});
											</script>
										</span>
										<span class="fguanzhu" v-if="1==3">
											<el-button type="primary" size="small " icon="el-icon-circle-plus-outline">相互关注
										</span>
										<span class="qfguanzhu" v-else>
											相互关注
										</span>
									</div>
								</div>

							</el-tab-pane>
							<el-tab-pane class="fansfans" :label="sa" name="myfous">
								<div class="daxiao">
									<div class="xh" v-for="l in fouslist">
										<a href="user_update.html">
											<img class="ftimg" :src="l.ui_headportrait+'/'+l.ui_headportraitname" />
										</a>
										<div class="fname" v-text="l.ui_nickname"></div>
										<span class="fxinxi">{{shenfen}}&nbsp;|</span>
										<span class="fxinxi">{{xuexiao}}</span>
										<span class="fxinxi">粉丝0人</span>
										<span class="fguanzhu" v-if="1==3">
											<el-button type="primary" size="small " icon="el-icon-circle-plus-outline">关注
										</span>
										<span class="qfguanzhu" v-else>
											已关注
										</span>
									</div>
								</div>
							</el-tab-pane>
						</el-tabs>
					</el-dialog>
				</div>
				<script type="text/javascript">
					var app = new Vue({
						el: '#fansorfous',
						data() {
							return {
								mfans: 0,
								mfous: 0,
								op: false,
								activeName: '',
								fanslist: [],
								fouslist: [],
								shenfen: "学生",
								xuexiao: "河南工业大学",
								ss: "我的粉丝",
								sa: "我的关注",
								urlPre: "http://localhost:8030/user",
							};
						},
						methods: {
							fanstab() {
								var vm = this;
								vm.op = true;
								vm.activeName = "myfans";

							},
							foustab() {
								var vm = this;
								vm.op = true;
								vm.activeName = "myfous";
							},
							handleClick(tab, event) {
								console.log(tab, event);
							},
							getfans() {
								var vm = this;
								axios.get(`${vm.urlPre}/getMyFans?uid=1`)
									.then(function(response) {
										vm.fanslist = response.data;
										console.log(response);
										//alert(response.data)
										console.log(response.data);
									})
									.catch(function(error) {
										console.log(error);
									});
							},
							getfanscount() {
								var vm = this;
								axios.get(`${vm.urlPre}/getMyFansCount?uid=1`)
									.then(function(response) {
										vm.mfans = response.data;

										console.log(response);
										console.log(response.data);
									})
									.catch(function(error) {
										console.log(error);
									});
							},
							getfous() {
								var vm = this;
								axios.get(`${vm.urlPre}/getMyfocus?uid=1`)
									.then(function(response) {
										vm.fouslist = response.data;
										console.log(response);
										//alert(response.data)
										console.log(response.data);
									})
									.catch(function(error) {
										console.log(error);
									});
							},
							getfouscount() {
								var vm = this;
								axios.get(`${vm.urlPre}/getMyfocusCount?uid=1`)
									.then(function(response) {
										vm.mfous = response.data;
										console.log(response);
										console.log(response.data);
									})
									.catch(function(error) {
										console.log(error);
									});
							}

						},
						created: function() {
							this.getfans();
							this.getfous();
							this.getfanscount();
							this.getfouscount();
						}
					});
				</script>
				<div id="huifutubiao" title="发帖数、回复数、评论数之和">
					<font size="10"><i class="el-icon-edit-outline"></i></font>
				</div>
				<div id="huifufont" title="发帖数、回复数、评论数之和">
					<font size="" color="8CC5FF">
						主题/回复
					</font>
				</div>
				<div id="huifunum" title="发帖数、回复数、评论数之和">
					{{hnum}}
					<script type="text/javascript">
						var app = new Vue({
							el: '#huifunum',
							data() {
								return {
									hnum: 10,
								};
							}
						});
					</script>
				</div>
				<div id="huozantubiao" title="获得赞数之和">
					<font size="10"><i class="el-icon-view"></i></font>
				</div>
				<div id="huozanfont" title="获得赞数之和">
					<font size="" color="8CC5FF">获赞数量</font>
				</div>
				<div id="huozannum" title="获得赞数之和">
					{{hznum}}
					<script type="text/javascript">
						var app = new Vue({
							el: '#huozannum',
							data() {
								return {
									hznum: 26,
								};
							}
						});
					</script>
				</div>
				<div id="xuefentubiao" title="累计学习学分">
					<font size="15"><i class="el-icon-time"></i></font>
				</div>
				<div id="xuefenfont" title="累计学习学分">
					<font size="" color="8CC5FF">学习学分</font>
				</div>
				<div id="xuefennum" title="累计学习学分">
					{{xnum}}
					<script type="text/javascript">
						var app = new Vue({
							el: '#xuefennum',
							data() {
								return {
									xnum: 76,
								};
							}
						});
					</script>
				</div>
			</div>
			<div id="tongji">
				<el-tabs v-model="activeName" id="ktz1" @tab-click.self="handleClick">
					<el-tab-pane label="用户管理" name="first">
						<div id="main1" style="width:500px;height:300px;">
						</div>
					</el-tab-pane>
					<el-tab-pane label="配置管理" name="second">
						<div id="tp" style="width: 600px ; height: 300px; background-image: url(img/15-目标.png);">

						</div>
					</el-tab-pane>
				</el-tabs>
				<script type="text/javascript">
					var app = new Vue({
						el: '#ktz1',
						data() {
							return {
								activeName: 'first'
							};
						},
						methods: {
							handleClick(tab, event) {
								console.log(tab, event);
							}
						}
					});
				</script>
			</div>
			<div id="ktz">
				<el-tabs v-model="activeName" id="ktz" type="card" @tab-click.self="handleClick">
					<el-tab-pane label="课程" name="first">

					</el-tab-pane>
					<el-tab-pane label="讨论" name="second">讨论</el-tab-pane>
				</el-tabs>
				<script type="text/javascript">
					var app = new Vue({
						el: '#ktz',
						data() {
							return {
								activeName: 'first',
								cishi: 5,
							};
						},
						methods: {
							handleClick(tab, event) {
								console.log(tab, event);
							}
						}
					});
				</script>
			</div>
		</span>
		<script src="js/kechengtongji.js"></script>
		<!-- <script>
			var myChart = echarts.init(document.getElementById('main1'));
			var option = {
				title: {
					text: '某站点用户访问来源',
					subtext: '纯属虚构',
					x: 'center'
				},
				tooltip: {
					trigger: 'item',
					formatter: "{a} <br />{b} : {c} ({d}%)"
				},
				legend: {
					orient: 'vertical',
					left: 'left',
					data: ['直接访问', '邮件营销', '联盟广告', '视频广告', '搜索引擎']
				},
				series: [{
					name: '访问来源',
					type: 'pie',
					radius: '55%',
					center: ['50%', '60%'],
					data: [{
							value: 335,
							name: '直接访问'
						},
						{
							value: 310,
							name: '邮件营销'
						},
						{
							value: 234,
							name: '联盟广告'
						},
						{
							value: 135,
							name: '视频广告'
						},
						{
							value: 1548,
							name: '搜索引擎'
						}
					],
					itemStyle: {
						emphasis: {
							shadowBlur: 10,
							shadowOffsetX: 0,
							shadowColor: 'rgba(0, 0, 0, 0.5)'
						}
					}
				}]
			};
			// 使用刚指定的配置项和数据显示图表。
			myChart.setOption(option);
		</script> -->
	</body>
</html>
